<div class='row my-5 blur'>
    <div class="col-1 col-md-2"></div>

    <div class="card border-dark col-10 col-md-8 shadow p-0">
        <div class="card-body text-dark py-1">
            <!-- header -->
            <div class="row border-bottom border-dark px-0 py-2 ">
                <div class="col-4 my-auto">
                    <img src="{{ data['info']['img']}}" alt=""
                        class='single_activity_profile_icon'>
                </div>

                <div class="col-8">
                    <div class="row">
                        <div class="col-12 my-auto fw-bold profile_nickname">
                            {{data['info']['nick']}}
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-md-3 col-12 my-auto">
                            Level:
                        </div>
                        <div class="col-md-9 col-12 my-auto text-end level_container">
                            <span class='level' hidden>{{data['info']['livello']}}</span>
                            <img src="{{url_for('static',filename='image/results/full_star.png')}}" alt=""
                                class='single_star single_star_full_0'>
                            <img src="{{url_for('static',filename='image/results/full_star.png')}}" alt=""
                                class='single_star single_star_full_1'>
                            <img src="{{url_for('static',filename='image/results/full_star.png')}}" alt=""
                                class='single_star single_star_full_2'>
                            <img src="{{url_for('static',filename='image/results/full_star.png')}}" alt=""
                                class='single_star single_star_full_3'>
                            <img src="{{url_for('static',filename='image/results/full_star.png')}}" alt=""
                                class='single_star single_star_full_4'>

                            <img src="{{url_for('static',filename='image/results/empty_star.png')}}" alt=""
                                class='single_star single_star_empty_0'>
                            <img src="{{url_for('static',filename='image/results/empty_star.png')}}" alt=""
                                class='single_star single_star_empty_1'>
                            <img src="{{url_for('static',filename='image/results/empty_star.png')}}" alt=""
                                class='single_star single_star_empty_2'>
                            <img src="{{url_for('static',filename='image/results/empty_star.png')}}" alt=""
                                class='single_star single_star_empty_3'>
                            <img src="{{url_for('static',filename='image/results/empty_star.png')}}" alt=""
                                class='single_star single_star_empty_4'>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-md-3 col-12 my-auto">
                            Friends:
                        </div>
                        <div class="col-md-9 col-12 my-auto text-end friends">
                            <span class='friends_num'>{{data['info']['friends']}}</span>
                            <!-- aggiungi questo controllo -> if data['info']['nick'] != {{session['nick']}} in un if -->
                                <button type="button" class="btn btn-light btn-amicizia shadow-sm {% if data['info']['just_friend'] %} disabled {%endif%}">Friend</button>
                        </div>
                    </div>

                </div>
            </div>

            <!--             <div class="row border-bottom border-dark px-0 py-2">
                <div class="col-4 my-auto fw-bold">
                    Friends
                </div>
                <div class="col-4 my-auto ">
                    {{data['info']['friends']}}
                </div>
                <div class="col-4 data my-auto text-end">
                    <button type="button" class="btn btn-light btn-amicizia shadow">Follow</button>
                </div>
            </div> -->

            <div class="row px-0 py-2">
                <nav>
                    <div class="nav nav-tabs" role="tablist">
                        <a class="nav-item nav-link active" data-toggle="tab" href="#nav-main" role="tab"
                            aria-controls="nav-home" aria-selected="true">Main</a>
                        <a class="nav-item nav-link" data-toggle="tab" href="#nav-stats" role="tab"
                            aria-controls="nav-stats" aria-selected="false">Statistics</a>
                        <a class="nav-item nav-link" data-toggle="tab" href="#nav-activity" role="tab"
                            aria-controls="nav-activity" aria-selected="false">Activities</a>
                    </div>
                </nav>
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                        <div class="row fw-bolder">
                            <div class="col-12 py-2">
                                Mean results
                            </div>
                        </div>
                        <div class="row border-bottom border-dark px-0">
                            <div class="col-12 col-md-6 mx-auto my-2 ">
                                <span class="global_FTD_score" hidden>{{data['info']['ftd_score']}}</span>
                                <canvas id="FTD-donuts"></canvas>
                            </div>
                            <div class="col-12 col-md-6 mx-auto my-2 ">
                                <canvas id="ECO-donuts"></canvas>
                            </div>
                        </div>

                        <div class="row border-bottom border-dark px-0">
                            <div class="col-6 mx-auto my-2 fw-bolder">
                                Total savings
                            </div>
                            <div class="col-3 mx-auto my-2 ">
                                {{data['info']['total_savings']}}â‚¬
                            </div>
                            <div class="col-3 mx-auto my-2 ">
                                <img src="{{url_for('static',filename='image/results/money.svg')}}" alt=""
                                    class='activity_results_icon'>
                            </div>
                        </div>

                        <div class="row border-bottom border-dark px-0">
                            <div class="row">
                                <div class="col-12 my-2 fw-bolder">
                                    Ongoing challenges
                                </div>
                            </div>
                            <div class="row px-0">
                                <div class="col-12 col-md-10 mx-auto my-2 table_wrapper">
                                    <table class="table ongoing_challenges_table">
                                        <thead class="text-center">
                                            <tr>
                                                <th scope="col" id="challenge">Challenge</th>
                                                <th scope="col" id="state">State</th>
                                                <th scope="col" id="badge">Badge</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {%for challenge in data['info']['ongoing_challenges'] %}
                                            <tr>
                                                <th scope="row" id="{{challenge[0]}}_{{challenge[1]}}" headers="challenge">{{challenge[1]}}</th>
                                                <td headers="state {{challenge[0]}}_{{challenge[1]}}">
                                                    <div class="progress">
                                                        <div class="progress-bar progress-bar-striped .bg-info"
                                                            role="progressbar" aria-valuemin="0" aria-valuemax="100">
                                                            {{challenge[2]}}%
                                                        </div>
                                                    </div>
                                                </td>
                                                <td headers="badge {{challenge[0]}}_{{challenge[1]}}" class='text-center'> <img src="{{url_for('static',filename='image/challenge_badges/'+challenge[3])}}" alt=""
                                                    class='badges_icon'></td>
                                            </tr>
                                            {%endfor%}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="row px-0">
                            <div class="row">
                                <div class="col-12 my-2 fw-bolder">
                                    Finished challenges
                                </div>
                            </div>
                            <div class="row px-0">
                                <div class="col-12 col-md-10 mx-auto my-2">
                                    <table class="table finished_challenges_table table_wrapper">
                                        <thead class="text-center">
                                            <tr>
                                                <th scope="col" id="challenge">Challenge</th>
                                                <th scope="col" id="state">State</th>
                                                <th scope="col" id="badge">Badge</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {%for challenge in data['info']['finished_challenges'] %}
                                            <tr>
                                                <th scope="row" id="{{challenge[0]}}_{{challenge[1]}}" headers="challenge">{{challenge[1]}}</th>
                                                <td headers="state {{challenge[0]}}_{{challenge[1]}}">
                                                    <div class="progress">
                                                        <div class="progress-bar progress-bar-striped .bg-info"
                                                            role="progressbar" aria-valuemin="0" aria-valuemax="100">
                                                            100%
                                                        </div>
                                                    </div>
                                                </td>
                                                <td headers="badge {{challenge[0]}}_{{challenge[1]}}" class='text-center'> <img src="{{url_for('static',filename='image/challenge_badges/'+challenge[3])}}" alt=""
                                                    class='badges_icon'></td>
                                                
                                            </tr>
                                            {%endfor%}
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div>

                    </div>

                    <div class="tab-pane fade nav-stats" role="tabpanel" aria-labelledby="nav-stats-tab">

                        <div class="row border-bottom border-dark  p-2">
                            <canvas id="ftdAndEcoBarPlot"></canvas>
                        </div>

                        <div class="row border-bottom border-dark  p-2">

                            <div class="col-12 my-auto fw-bold">
                                Fitness to Drive
                            </div>

                            <div class="col-12 col-md-6 mx-auto my-2">
                                <table class="table table-bordered border-dark elementOfDistractionTable">
                                    <thead class="text-center">
                                        <tr>
                                            <th scope="col" id="disctractionElement">Element</th>
                                            <th scope="col" id="distractionValue">Value</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                            
                                    </tbody>
                                </table>
                            </div>

                            <div class="col-12 col-md-6 mx-auto my-2">
                                <canvas id="ElementOfDistractionRadarMean"></canvas>
                            </div>

                            <div class="col-12 col-md-3">
                                <table class="table ftdTrendStatistic">
                                    <thead>
                                        <tr>
                                            <th scope="col"></th>
                                            <th scope="col">Value</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th scope="row">Max</th>
                                            <td class="ftdTrendMax"></td>
                                        </tr>
                                        <tr>
                                            <th scope="row">Min</th>
                                            <td class="ftdTrendMin"></td>
                                        </tr>
                                        <tr>
                                            <th scope="row">Mean</th>
                                            <td class="ftdTrendMean"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-3"></div>
                            <div class="col-12 col-md-6 mx-auto my-2">
                                <canvas id="ftdTrendGraph"></canvas>
                            </div>

                        </div>
                        <div class="row p-2">

                            <div class="col-12 my-auto fw-bold">
                                Eco
                            </div>

                            <div class="col-12 col-md-3 mx-auto my-2">
                                <table class="table ecoDriveStatistic ">
                                    <thead>
                                        <tr>
                                            <th scope="col"></th>
                                            <th scope="col">Value</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th scope="row">Max</th>
                                            <td class="ecoTrendMax"></td>

                                        </tr>
                                        <tr>
                                            <th scope="row">Min</th>
                                            <td class="ecoTrendMin"></td>

                                        </tr>
                                        <tr>
                                            <th scope="row">Mean</th>
                                            <td class="ecoTrendMean"></td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-3"></div>
                            <div class="col-12 col-md-6 mx-auto my-2">
                                <canvas id="ecoTrendGraph"></canvas>
                            </div>

                        </div>

                    </div>

                    <div class="tab-pane fade nav-activity" role="tabpanel" aria-labelledby="nav-activity-tab">
                        {%if data['info']['activities']|length == 0%}
                        <p class="text-secondary text-center my-5">Non sono ancora presenti delle attivit&agrave; personali</p>
                        {%endif%}
                        {%for key, value in data['info']['activities'].items() %}
                        <div class='row my-5'>
                            <div class="col-1 col-md-2"></div>

                            <form action="/single_activity" method="POST" class='col-10 col-md-8'>
                                <input type="hidden" id="idActivity" name="idActivity" value="{{key}}"/>
                                <div class="card border-dark shadow p-0">
                                    <div class="card-body text-dark py-1">
                                        <div class="row border-bottom border-dark pb-2">
                                            <div class="col-3">
                                                <img src="{{ value['img'] }}" alt=""
                                                    class='activity_profile_icon'>
                                            </div>
                                            <div class="col-9 my-auto text-left fw-bold">
                                                {{value['nick']}}
                                            </div>
                                            <div class="col-12 data my-auto text-end">
                                                {{value['data']}}
                                            </div>
                                        </div>
    
                                        <div class="row border-bottom border-dark px-0 py-2">
                                            <div class="col-12 col-md-3 my-auto fw-bold">
                                                FTD score
                                            </div>
                                            <div class="col-md-5 col-6 my-auto text-center">
                                                {{value['ftd_score']}}
                                            </div>
                                            <div class="col-md-4 col-6 data my-auto text-end">
                                                {%for res in value['ftd_res'] %}
                                                <img src="{{url_for('static',filename='image/results/'+ res)}}" alt=""
                                                    class='activity_results_icon'>
                                                {% endfor %}
                                            </div>
                                        </div>
    
                                        <div class="row border-bottom border-dark px-0 py-2">
                                            <div class="col-12 col-md-3 my-auto fw-bold">
                                                ECO score
                                            </div>
                                            <div class="col-md-5 col-6 my-auto text-center">
                                                {{value['eco_score']}}
                                            </div>
                                            <div class="col-md-4 col-6 data my-auto text-end">
                                                {%for res in value['eco_res'] %}
                                                <img src="{{url_for('static',filename='image/results/'+ res)}}" alt=""
                                                    class='activity_results_icon'>
                                                {% endfor %}
                                            </div>
                                        </div>
    
                                        <div class="row px-0">
                                            <div class="col-6 my-auto">
                                                Likes
                                            </div>
                                            <div class="col-6 nickname text-end">
                                                {{value['like']}}
                                            </div>
    
                                        </div>
                                    </div>
                                </div>
                            </form>
                            

                            <div class="col-1 col-md-2"></div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="col-1 col-md-2"></div>
</div>

<div class="row">
        <div class="hover_bkgr_fricc col-12">
            <span class="helper"></span>
            <div>
                <!-- <div class="popupCloseButton">&times;</div> -->
                <div class="fw-bold my-2">Friends</div>
                <div class= "list-group">
                    {%for f in data['info']['friends_list']%}
                    <form action="/profile" method="post">
                        <input type="hidden" name="nick" value='{{f}}'>
                        <button type="submit" class="list-group-item list-group-item-action">{{f}}</button>
                    </form>
                    {%endfor%}
                </div>
        </div>
    </div>
</div>